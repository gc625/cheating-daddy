<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: transparent;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
        }
        .bounding-box {
            position: absolute;
            border: 2px solid #ff0000;
            background: transparent;
            pointer-events: none;
            box-sizing: border-box;
            animation: fadeIn 0.2s ease-in;
        }
        .bounding-box-label {
            position: absolute;
            top: -25px;
            left: 0;
            background: #ff0000;
            color: white;
            padding: 2px 6px;
            font-size: 12px;
            font-family: monospace;
            white-space: nowrap;
            border-radius: 2px;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes fadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.95); }
        }
    </style>
</head>
<body>
    <script>
        const { ipcRenderer } = require('electron');
        
        // Listen for bounding box commands
        ipcRenderer.on('draw-bounding-box', (event, data) => {
            drawBoundingBox(data);
        });
        
        ipcRenderer.on('remove-bounding-box', (event, boxId) => {
            removeBoundingBox(boxId);
        });
        
        ipcRenderer.on('clear-all-bounding-boxes', () => {
            clearAllBoundingBoxes();
        });
        
        function drawBoundingBox(data) {
            const { boxId, xmin, ymin, xmax, ymax, options } = data;
            const { color = '#ff0000', width = 2, label = null } = options;
            
            // Calculate dimensions
            const boxWidth = xmax - xmin;
            const boxHeight = ymax - ymin;
            
            // Create bounding box element
            const boxElement = document.createElement('div');
            boxElement.id = boxId;
            boxElement.className = 'bounding-box';
            boxElement.style.left = xmin + 'px';
            boxElement.style.top = ymin + 'px';
            boxElement.style.width = boxWidth + 'px';
            boxElement.style.height = boxHeight + 'px';
            boxElement.style.borderColor = color;
            boxElement.style.borderWidth = width + 'px';
            
            // Add label if provided
            if (label) {
                const labelElement = document.createElement('div');
                labelElement.className = 'bounding-box-label';
                labelElement.style.backgroundColor = color;
                labelElement.textContent = label;
                boxElement.appendChild(labelElement);
            }
            
            document.body.appendChild(boxElement);
            console.log('Drew screen bounding box:', boxId);
        }
        
        function removeBoundingBox(boxId) {
            const element = document.getElementById(boxId);
            if (element) {
                element.style.animation = 'fadeOut 0.2s ease-out';
                setTimeout(() => {
                    if (element.parentNode) {
                        element.parentNode.removeChild(element);
                    }
                }, 200);
                console.log('Removed screen bounding box:', boxId);
            }
        }
        
        function clearAllBoundingBoxes() {
            const boxes = document.querySelectorAll('.bounding-box');
            boxes.forEach(box => {
                box.style.animation = 'fadeOut 0.2s ease-out';
                setTimeout(() => {
                    if (box.parentNode) {
                        box.parentNode.removeChild(box);
                    }
                }, 200);
            });
            console.log('Cleared all screen bounding boxes');
        }
    </script>
</body>
</html>`;